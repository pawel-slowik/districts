#!/usr/bin/env php
<?php

declare(strict_types=1);

require __DIR__ . "/../vendor/autoload.php";

use DI\Container;
use Districts\Scraper\UI\ImportCommand;
use Symfony\Component\Console\Application;

$container = new Container();

foreach (["common", "cli"] as $dependencyPart) {
    $dependencies = require __DIR__ . "/../dependencies/{$dependencyPart}.php";
    foreach ($dependencies as $dependency => $factory) {
        $container->set($dependency, $factory);
    }
}

$application = new Application();
$application->add($container->get(ImportCommand::class));
$application->run();
